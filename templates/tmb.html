{% extends "base.html" %}

{% block title %}Calculadoras Nutricionales{% endblock %}

{% block content %}
<div class="container my-5">
    <h1 class="text-center text-success mb-5">Calculadoras Nutricionales</h1>
<div class="card mb-4 border-success">
    <div class="card-header bg-success text-white">
        <h2 class="h5 mb-0">1. Tasa Metabólica Basal (TMB)</h2>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="pesoTMB" class="form-label text-success">Peso (kg):</label>
                <input type="number" id="pesoTMB" class="form-control" placeholder="Ej: 70" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="alturaTMB" class="form-label text-success">Altura (cm):</label>
                <input type="number" id="alturaTMB" class="form-control" placeholder="Ej: 175" required>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="edadTMB" class="form-label text-success">Edad (años):</label>
                <input type="number" id="edadTMB" class="form-control" placeholder="Ej: 30" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="generoTMB" class="form-label text-success">Género:</label>
                <select id="generoTMB" class="form-select">
                    <option value="hombre">Hombre</option>
                    <option value="mujer">Mujer</option>
                </select>
            </div>
        </div>
        <button onclick="calcularTMB()" class="btn btn-success w-100">Calcular TMB</button>
        <div class="mt-3 p-3 bg-light rounded border border-success">
            <p class="mb-0 text-success">Resultado TMB:</p>
            <strong id="resultadoTMB" class="h4">0 kcal/día</strong>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function obtenerValor(id) {
        const valor = parseFloat(document.getElementById(id).value);
        if (isNaN(valor)) {
            return null;
        }
        return valor;
    }

    function calcularTMB() {
        const peso = obtenerValor('pesoTMB');
        const altura = obtenerValor('alturaTMB');
        const edad = obtenerValor('edadTMB');
        const genero = document.getElementById('generoTMB').value;
        let tmb = 0;

        if (!peso || !altura || !edad) {
            document.getElementById('resultadoTMB').textContent = "Error: Ingrese valores válidos.";
            return;
        }

        if (genero === 'hombre') {
            tmb = 66 + (13.7 * peso) + (5 * altura) - (6.8 * edad);
        } else {
            tmb = 655 + (9.6 * peso) + (1.8 * altura) - (4.7 * edad);
        }

        document.getElementById('resultadoTMB').textContent = `${Math.round(tmb)} kcal/día`;
    }
</script>
{% endblock %}

