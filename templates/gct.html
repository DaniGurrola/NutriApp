{% extends "base.html" %}

{% block title %}Calculadoras Nutricionales{% endblock %}

{% block content %}
<div class="container my-5">
    <h1 class="text-center text-success mb-5">Calculadoras Nutricionales</h1>
<div class="card mb-4 border-success">
    <div class="card-header bg-success text-white">
        <h2 class="h5 mb-0">2. Gasto Calórico Total (GCT) / Calorías Diarias</h2>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="pesoGCT" class="form-label text-success">Peso (kg):</label>
                <input type="number" id="pesoGCT" class="form-control" placeholder="Ej: 70" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="alturaGCT" class="form-label text-success">Altura (cm):</label>
                <input type="number" id="alturaGCT" class="form-control" placeholder="Ej: 175" required>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="edadGCT" class="form-label text-success">Edad (años):</label>
                <input type="number" id="edadGCT" class="form-control" placeholder="Ej: 30" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="generoGCT" class="form-label text-success">Género:</label>
                <select id="generoGCT" class="form-select">
                    <option value="hombre">Hombre</option>
                    <option value="mujer">Mujer</option>
                </select>
            </div>
        </div>
        <div class="mb-3">
            <label for="actividadGCT" class="form-label text-success">Nivel de Actividad:</label>
            <select id="actividadGCT" class="form-select">
                <option value="1.2">1. Sedentario (poco o ningún ejercicio)</option>
                <option value="1.375">2. Ligero (ejercicio 1-3 días/semana)</option>
                <option value="1.55">3. Moderado (ejercicio 3-5 días/semana)</option>
                <option value="1.725">4. Alto (ejercicio 6-7 días/semana)</option>
                <option value="1.9">5. Muy Alto (ejercicio intenso diario)</option>
            </select>
        </div>

        <button onclick="calcularGCT()" class="btn btn-success w-100">Calcular GCT</button>

        <div class="mt-3 p-3 bg-light rounded border border-success">
            <p class="mb-0 text-success">Resultado GCT (Calorías Mantenimiento):</p>
            <strong id="resultadoGCT" class="h4">0 kcal/día</strong>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script>
        function obtenerValor(id) {
            const valor = parseFloat(document.getElementById(id).value);
            if (isNaN(valor)) {
                return null;
            }
            return valor;
        }
        
        function calcularGCT() {
            const peso = parseFloat(document.getElementById('pesoGCT').value);
            const altura = parseFloat(document.getElementById('alturaGCT').value);
            const edad = parseFloat(document.getElementById('edadGCT').value);
            const genero = document.getElementById('generoGCT').value;
            const factorActividad = parseFloat(document.getElementById('actividadGCT').value);
            let tmb = 0;
        
            if (!peso || !altura || !edad) {
                document.getElementById('resultadoGCT').textContent = "Error: Ingrese valores válidos.";
                return;
            }
        
            if (genero === 'hombre') {
                tmb = 10 * peso + 6.25 * altura - 5 * edad + 5;
            } else {
                tmb = 10 * peso + 6.25 * altura - 5 * edad - 161;
            }
        
            const gct = tmb * factorActividad;
            document.getElementById('resultadoGCT').textContent = `${Math.round(gct)} kcal/día`;
        }
    </script>
    {% endblock %}
    